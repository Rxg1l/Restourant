ðŸ’¡ Apa Itu Exception (Pengecualian)?Exception adalah kejadian yang tidak terduga atau anomali yang terjadi selama eksekusi program yang mengganggu alur normal dari program tersebut.Dalam Java, Exception adalah objek yang dibuat dan dilempar (thrown) oleh Java Virtual Machine (JVM) atau oleh kode Anda sendiri ketika terjadi masalah.Peran Kunci Exception dalam Aplikasi AndaDalam konteks API Spring Boot, Exception memiliki dua peran utama:
1. Menandakan Kegagalan Logika BisnisIni adalah Exception yang Anda definisikan sendiri di lapisan Service (Chef Kepala) ketika ada aturan bisnis yang dilanggar.Tipe ExceptionKapan Terjadi?Contoh di Kode AndaIllegalArgumentExceptionKetika sebuah method dipanggil dengan parameter yang tidak legal atau tidak sesuai aturan.Di MenuService.simpanMenu(), jika harga <= 0, Anda melempar new IllegalArgumentException("Harga harus positif.").ResourceNotFoundException (Custom)Ketika Service mencoba mencari data (misalnya, Menu ID 99) tetapi data tersebut tidak ada.Ketika Anda menggunakan orElseThrow() pada Optional hasil dari Repository.
2. Menangani Kegagalan Sistem (System Failures)Ini adalah Exception yang dilempar oleh framework Spring, JPA, atau JVM ketika ada masalah infrastruktur atau teknis.Tipe ExceptionPenyebab UmumContoh Status HTTPNullPointerExceptionAnda mencoba mengakses method atau field dari objek yang nilainya null.500 Internal Server ErrorMethodArgumentNotValidExceptionKegagalan validasi pada request body (karena Anda menggunakan @Valid).400 Bad RequestDataIntegrityViolationExceptionAnda mencoba menyimpan data ke database tetapi melanggar batasan (misalnya, field NOT NULL kosong).500 Internal Server Error
ðŸ—ï¸ Alur Exception dalam Spring Boot (Global Exception Handling)Tujuan utama dari penanganan Exception di Spring Boot adalah agar client tidak pernah melihat stack trace Java yang panjang dan membingungkan (Status 500 Internal Server Error Default).Inilah alur bagaimana Exception harus ditangani dalam arsitektur Anda :LangkahAksi yang TerjadiPenanganan/Anotasi
1. Exception DilemparLapisan Service (misalnya) menemukan pelanggaran dan melempar Exception (contoh: throw new ResourceNotFoundException(...)).Di dalam Service atau Repository.
2. Exception MerambatException merambat naik dari Service menuju Controller (melewati try-catch jika ada, atau dibiarkan saja).
3. Handler MencegatController Advice (GlobalExceptionHandler) mencegat Exception tersebut.Kelas dengan anotasi @ControllerAdvice.
4. Penanganan TerpusatMethod di Global Handler yang dianotasi @ExceptionHandler(TipeException.class) dieksekusi.Method dengan anotasi @ExceptionHandler.
5. Response TerformatHandler mengubah Exception menjadi respons yang rapi (menggunakan ErrorResponse DTO) dan menetapkan kode status HTTP yang benar (400, 404, 500).Mengembalikan ResponseEntity<ErrorResponse> dengan HttpStatus yang sesuai.Manfaat Penggunaan Exception yang BenarKeterbacaan Kode: Method Anda bersih; Anda tidak perlu banyak blok if-else untuk penanganan error.Kualitas API: Client menerima pesan error yang konsisten, mudah dipahami, dan dengan kode status HTTP yang semantik (404 untuk tidak ditemukan, 400 untuk input salah, 500 untuk server crash).Keamanan: Informasi internal server (seperti stack trace dan nama class internal) disembunyikan dari client publik.